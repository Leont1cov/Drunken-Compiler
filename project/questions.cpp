#include "questions.h"

#include <iostream>

void askGuruQuestion(int r, int& c) {
    if (r == 1) { std::cout << "Что такое strict weak ordering в std::sort?\n1) Требование к компаратору\n2) Тип контейнера\n3) Флаг компилятора\n"; c = 1; }
    else if (r == 2) { std::cout << "Чем опасен dangling reference?\n1) Неопределенным поведением\n2) Ускорением CPU\n3) Экономией RAM\n"; c = 1; }
    else if (r == 3) { std::cout << "Что дает move semantics?\n1) Лишние копии\n2) Передачу ресурсов без копий\n3) Отключение RAII\n"; c = 2; }
    else if (r == 4) { std::cout << "Зачем virtual деструктор?\n1) Для корректного delete через base*\n2) Для красоты\n3) Для запрета наследования\n"; c = 1; }
    else { std::cout << "Что сильнее ломает OCP?\n1) if(type==...) по всему проекту\n2) Интерфейсы\n3) DI\n"; c = 1; }
}

void askSageQuestion(int r, int& c) {
    if (r == 1) { std::cout << "Что ближе к инженерной мудрости?\n1) Сложность ради эго\n2) Простота, которую можно объяснить\n3) Игнор ревью\n"; c = 2; }
    else if (r == 2) { std::cout << "Метрика растет, а пользователи страдают. Что делать?\n1) Верить только графику\n2) Проверять контекст и фидбек\n3) Скрыть дашборд\n"; c = 2; }
    else if (r == 3) { std::cout << "Техдолг - это...\n1) Цена скорости без осознанности\n2) Просто баг\n3) Вид зарплаты\n"; c = 1; }
    else if (r == 4) { std::cout << "Главное в архитектурном споре?\n1) Выиграть спор\n2) Снизить риск и стоимость изменений\n3) Делать как в блоге\n"; c = 2; }
    else { std::cout << "Когда оправдан полный rewrite?\n1) Когда доказано, что постепенный рефактор хуже\n2) Всегда\n3) Никогда\n"; c = 1; }
}

void askLegacyQuestion(int tier, int r, int& c) {
    c = 1;
    if (tier == 1) {
        if (r == 1) std::cout << "Первое правило legacy?\n1) Зафиксировать поведение тестами\n2) Переписать все\n3) Катить без проверки\n";
        else if (r == 2) std::cout << "Опаснее всего в старом C++?\n1) Неявное владение памятью\n2) constexpr\n3) std::array\n";
        else if (r == 3) std::cout << "Как снижать риск релиза?\n1) Canary/feature flags\n2) 100% rollout\n3) Без мониторинга\n";
        else if (r == 4) { std::cout << "Observability помогает...\n1) Декорировать код\n2) Быстро находить причины инцидентов\n3) Магией чинить баги\n"; c = 2; }
        else std::cout << "Какой smell критичен?\n1) God object\n2) README\n3) Unit-тесты\n";
    } else if (tier == 2) {
        if (r == 1) std::cout << "Что такое strangler pattern?\n1) Постепенная замена старой системы\n2) SQL-инъекция\n3) Вид GC\n";
        else if (r == 2) std::cout << "Почему big-bang миграция рискованна?\n1) Большой blast radius\n2) Меньше работы\n3) Всегда быстрее\n";
        else if (r == 3) std::cout << "Неизвестное поведение legacy - что делать?\n1) Characterization tests\n2) Гадать\n3) Удалить логи\n";
        else if (r == 4) std::cout << "Устойчивый рефакторинг - это...\n1) Малые обратимые шаги\n2) Один гигантский PR\n3) Никак\n";
        else { std::cout << "При падении продакшена сначала...\n1) Искать виноватых\n2) Стабилизировать, потом разбирать\n3) Отключить алерты\n"; c = 2; }
    } else {
        if (r == 1) std::cout << "Data race приводит к...\n1) Неопределенному поведению\n2) Только warning\n3) Всегда безопасно\n";
        else if (r == 2) std::cout << "Idempotency нужна для...\n1) Безопасных ретраев\n2) Красоты кода\n3) Меньше логов\n";
        else if (r == 3) std::cout << "Зачем ограничивать coupling?\n1) Чтобы удешевить изменения\n2) Ради моды\n3) Для хаоса\n";
        else if (r == 4) std::cout << "Опасность high-load legacy?\n1) Непредсказуемые latency spikes\n2) Комментарии\n3) CI\n";
        else std::cout << "Как побеждать хаос?\n1) Границы, метрики, дисциплина\n2) Hero coding\n3) Случайные решения\n";
    }
}

void askDesignerBossQuestion(int r, int& c) {
    c = 1;
    if (r == 1) std::cout << "Что важнее в продукте?\n1) UX + стабильность\n2) Только красота\n3) Только бэкенд\n";
    else if (r == 2) std::cout << "Здоровый компромисс - это...\n1) MVP с измеримой ценностью\n2) Бесконечный пиксель-перфект\n3) Без релиза\n";
    else if (r == 3) std::cout << "Что спасает от спорных редизайнов?\n1) A/B тесты и метрики\n2) Интуиция одного человека\n3) Игнор исследований\n";
    else if (r == 4) std::cout << "Design system нужна для...\n1) Консистентности и скорости\n2) Только презентаций\n3) Хаоса\n";
    else std::cout << "Финал: релиз должен максимизировать...\n1) Ценность для пользователя\n2) Цвет кнопки любой ценой\n3) Хаос\n";
}
